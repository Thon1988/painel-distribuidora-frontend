<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Admin ‚Äî AppEgg (Ovos Aline)</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
  <style>
    *, *::before, *::after { box-sizing: border-box; margin:0; padding:0; }
    :root {
      --primary: #E8960C;
      --dark:    #D4500A;
      --brown:    #3D2B1F;
      --cream:    #FFF8EE;
      --muted:    #8B6F5E;
      --white:    #FFFFFF;
      --green:    #2E7D32;
      --red:      #C62828;
      --border:  #E0CFC0;
      --shadow:  0 2px 16px rgba(61,43,31,.10);
    }
    body { font-family:'Segoe UI',system-ui,sans-serif; background:#F5EFE6; color:var(--brown); min-height:100vh; display:flex; flex-direction:column; }
    header { background:linear-gradient(135deg,var(--dark),var(--primary)); color:#fff; padding:0 24px; height:64px; display:flex; align-items:center; justify-content:space-between; position:sticky; top:0; z-index:100; box-shadow:0 3px 14px rgba(0,0,0,.22); }
    .h-logo { display:flex; align-items:center; gap:10px; font-size:1.15rem; font-weight:900; }
    .h-back { background:rgba(255,255,255,.2); border:2px solid rgba(255,255,255,.5); color:#fff; border-radius:50px; padding:6px 16px; cursor:pointer; font-size:.85rem; font-weight:700; text-decoration:none; transition:background .2s; }
    .layout { display:flex; flex:1; }
    .nav { width:220px; background:var(--white); border-right:1px solid var(--border); padding:20px 0; flex-shrink:0; }
    .nav-item { display:flex; align-items:center; gap:10px; padding:12px 20px; cursor:pointer; font-size:.9rem; font-weight:600; color:var(--muted); border-left:3px solid transparent; }
    .nav-item.active { background:#FFF3E0; color:var(--dark); border-left-color:var(--dark); }
    .content { flex:1; padding:28px 24px; max-width:1000px; }
    .section { display:none; }
    .section.active { display:block; }
    .card { background:var(--white); border-radius:16px; box-shadow:var(--shadow); padding:24px; margin-bottom:20px; border:1px solid var(--border); }
    .form-grid { display:grid; grid-template-columns: 1fr 1fr; gap:15px; margin-top:15px; }
    .field { display:flex; flex-direction:column; gap:5px; }
    .field label { font-size:.75rem; font-weight:800; color:var(--muted); text-transform:uppercase; }
    .field input, .field textarea { padding:10px; border-radius:8px; border:1.5px solid var(--border); outline:none; }
    .btn { border:none; border-radius:50px; padding:10px 20px; font-weight:700; cursor:pointer; display:inline-flex; align-items:center; gap:8px; }
    .btn-primary { background:var(--dark); color:#fff; }
    .btn-green { background:var(--green); color:#fff; }
    .prod-item { background:var(--white); border:1px solid var(--border); border-radius:12px; padding:15px; display:flex; align-items:center; gap:15px; margin-bottom:10px; }
    .modal-bg { position:fixed; inset:0; background:rgba(0,0,0,.6); display:none; align-items:center; justify-content:center; z-index:1000; }
    .modal-bg.open { display:flex; }
    .modal-box { background:#fff; padding:30px; border-radius:20px; width:500px; max-width:95%; }
    .toast { position:fixed; bottom:20px; left:50%; transform:translateX(-50%); background:var(--brown); color:#fff; padding:10px 25px; border-radius:50px; opacity:0; transition:opacity .3s; z-index:2000; }
  </style>
</head>
<body>

<header>
  <div class="h-logo">ü•ö AppEgg Admin</div>
  <a href="#" onclick="window.location.reload()" class="h-back">Sair</a>
</header>

<div class="layout">
  <nav class="nav">
    <div class="nav-item active" onclick="showSec('produtos', this)">ü•ö Produtos</div>
    <div class="nav-item" onclick="showSec('pix', this)">üíö Pagamento PIX</div>
    <div class="nav-item" onclick="showSec('loja', this)">üè™ Loja</div>
  </nav>

  <main class="content">
    <section id="sec-produtos" class="section active">
      <h2>Gerenciar Cat√°logo</h2>
      <button class="btn btn-primary" style="margin: 20px 0;" onclick="openModal()">+ Adicionar Ovo</button>
      <div id="lista-produtos"></div>
    </section>

    <section id="sec-pix" class="section">
      <h2>Configura√ß√£o de Recebimento</h2>
      <div class="card">
        <div class="field">
          <label>Chave PIX</label>
          <input type="text" id="pix-chave" placeholder="CPF, E-mail ou Celular">
        </div>
        <div class="field" style="margin-top:10px">
          <label>Nome do Titular</label>
          <input type="text" id="pix-nome" placeholder="ALINE OVOS">
        </div>
        <div style="margin-top:20px">
          <button class="btn btn-green" onclick="savePix()">Salvar Configura√ß√µes</button>
        </div>
        <div id="qrcode-preview" style="margin-top:20px; display:flex; justify-content:center;"></div>
      </div>
    </section>

    <section id="sec-loja" class="section">
      <h2>Dados da Empresa</h2>
      <div class="card">
        <div class="form-grid">
          <div class="field"><label>Nome</label><input type="text" id="store-name"></div>
          <div class="field"><label>Slogan</label><input type="text" id="store-slogan"></div>
        </div>
        <button class="btn btn-primary" style="margin-top:20px" onclick="saveStore()">Salvar Dados</button>
      </div>
    </section>
  </main>
</div>

<div class="modal-bg" id="modal-prod">
  <div class="modal-box">
    <h3>Dados do Produto</h3>
    <div class="form-grid" style="grid-template-columns:1fr">
      <div class="field"><label>Nome</label><input type="text" id="p-nome"></div>
      <div class="field"><label>Pre√ßo (R$)</label><input type="number" id="p-preco" step="0.01"></div>
      <div class="field"><label>Descri√ß√£o</label><textarea id="p-desc"></textarea></div>
    </div>
    <div style="margin-top:20px; display:flex; gap:10px">
      <button class="btn btn-green" onclick="addProduto()">Salvar</button>
      <button class="btn" style="background:#eee" onclick="closeModal()">Cancelar</button>
    </div>
  </div>
</div>

<div class="toast" id="toast">A√ß√£o realizada!</div>

<script>
  let produtos = JSON.parse(localStorage.getItem('appegg_prods')) || [];
  let config = JSON.parse(localStorage.getItem('appegg_cfg')) || { chave: '', nome: '', storeName: 'Ovos Aline' };

  function showSec(id, el) {
    document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
    document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
    document.getElementById('sec-'+id).classList.add('active');
    el.classList.add('active');
  }

  function openModal() { document.getElementById('modal-prod').classList.add('open'); }
  function closeModal() { document.getElementById('modal-prod').classList.remove('open'); }

  function addProduto() {
    const p = {
      id: Date.now(),
      nome: document.getElementById('p-nome').value,
      preco: document.getElementById('p-preco').value,
      desc: document.getElementById('p-desc').value
    };
    produtos.push(p);
    localStorage.setItem('appegg_prods', JSON.stringify(produtos));
    renderProds();
    closeModal();
    showToast("Produto adicionado!");
  }

  function renderProds() {
    const container = document.getElementById('lista-produtos');
    container.innerHTML = produtos.map(p => `
      <div class="prod-item">
        <div style="flex:1">
          <strong>${p.nome}</strong><br>
          <small>R$ ${p.preco}</small>
        </div>
        <button class="btn" style="background:var(--red); color:#fff" onclick="removeProd(${p.id})">Excluir</button>
      </div>
    `).join('');
  }

  function removeProd(id) {
    produtos = produtos.filter(p => p.id !== id);
    localStorage.setItem('appegg_prods', JSON.stringify(produtos));
    renderProds();
  }

  function savePix() {
    config.chave = document.getElementById('pix-chave').value;
    config.nome = document.getElementById('pix-nome').value;
    localStorage.setItem('appegg_cfg', JSON.stringify(config));
    
    // Gerar pr√©via do QR Code (Valor Simb√≥lico R$ 1,00)
    document.getElementById('qrcode-preview').innerHTML = "";
    new QRCode(document.getElementById('qrcode-preview'), {
      text: `00020126330014BR.GOV.BCB.PIX0111${config.chave}52040000530398654041.005802BR5910${config.nome}6008BRASILIA62070503***6304`,
      width: 128,
      height: 128
    });
    showToast("Configura√ß√µes PIX salvas!");
  }

  function showToast(msg) {
    const t = document.getElementById('toast');
    t.textContent = msg;
    t.style.opacity = 1;
    setTimeout(() => t.style.opacity = 0, 2000);
  }

  // Inicializa√ß√£o
  renderProds();
  document.getElementById('pix-chave').value = config.chave;
  document.getElementById('pix-nome').value = config.nome;
</script>

</body>
</html>
